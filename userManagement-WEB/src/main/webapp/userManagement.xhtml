<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
<title>Users and roles management</title>
</head>
<body>
	<!-- 		<h:panelGrid columns="2"> -->
	<table>
		<tr>
			<th width="500">List all users</th>
			<th width="500">List all roles</th>
		</tr>
		<tr>
			<td><h:outputText value="Id: user name - roles"
					style="font-weight:bold" /> <br /> <br /> <ui:repeat
					value="#{userBean.all.subList(0, userBean.all.size() - 1)}"
					var="value">
	     #{value.id}:  #{value.username} -   <ui:repeat
						value="#{value.roles}" var="role">#{role.role}, </ui:repeat>
					<br />
				</ui:repeat> <ui:repeat
					value="#{userBean.all.subList(userBean.all.size() - 1, userBean.all.size())}"
					var="value">
	     #{value.id}:  #{value.username} -  
				 <ui:repeat
						value="#{value.roles.subList(0, value.roles.size() - 1)}"
						var="role">#{role.role}, </ui:repeat>
					<ui:repeat
						value="#{value.roles.subList(value.roles.size() - 1, value.roles.size())}"
						var="role">#{role.role}</ui:repeat>
					<br />
				</ui:repeat></td>
			<td><h:outputText value="Id: role" style="font-weight:bold" /><br />
				<ui:repeat value="#{roleBean.all}" var="value">
     #{value.id}:  #{value.role} <br />
				</ui:repeat> <br /></td>
		</tr>
		<tr>
			<td>
				<h3>Add new user</h3> Please input name and role for the new user! <br />
				<h:form>
					<h:inputText value="#{userBean.username}" />
					<br />
					<h:inputText value="#{userBean.role}" />
					<br />
					<h:commandButton value="Submit" action="#{userBean.addUser}" />
				</h:form>
			</td>
			<td><h3>Add new role</h3> Please input name for the new role! <br />
				<h:form>
					<h:inputText value="#{roleBean.rolename}" />
					<br />
					<h:commandButton value="Submit" action="#{roleBean.addRole}" />
				</h:form></td>
		</tr>


		<tr>
			<td><br />
				<h3>Update existing user</h3> <h:form>
	Please input the id and the new name and role for the user! <br />
					<h:inputText value="#{userBean.searchId}" />
					<br />
					<h:inputText value="#{userBean.username}" />
					<br />
					<h:inputText value="#{userBean.role}" />
					<br />
					<h:commandButton value="Submit" action="#{userBean.updateUser}" />
				</h:form></td>
			<td>
				<h3>Update existing role</h3> <h:form>
	Please input the id and the new name for the role! <br />
					<h:inputText value="#{roleBean.searchId}" />
					<br />
					<h:inputText value="#{roleBean.rolename}" />
					<br />
					<h:commandButton value="Submit" action="#{roleBean.updateRole}" />
				</h:form>
			</td>
		</tr>
		<tr>
			<td>
				<h3>Delete existing user</h3> <h:form>
	Please input the id of the user! <br />
					<h:inputText value="#{userBean.searchId}" />

					<h:commandButton value="Submit" action="#{userBean.removeUser}" />
				</h:form>
			</td>
			<td>
				<h3>Delete existing role</h3> <h:form>
	Please input the id of the role! <br />
					<h:inputText value="#{roleBean.searchId}" />

					<h:commandButton value="Submit" action="#{roleBean.removeRole}" />
				</h:form>
			</td>
		</tr>
	</table>

</body>
</html>
